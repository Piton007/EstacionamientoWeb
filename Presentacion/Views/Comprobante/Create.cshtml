
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Generar Comprobante</title>
    @model Entidades.Comprobante
</head>
<body>

    <section id="NewComprobante">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-5 col-md-5">
                    <h1 style="font-family:Arial, Helvetica, sans-serif;text-align:center;color:darkcyan"> Comprobante </h1>
                    <hr style="color:black" />
                </div>

            </div>
        </div>
        <div class="container-fluid">
            <div class="row">
                <form class="form-horizontal">



                    <div class="form-group">
                        <label for="placa" class="col-lg-2 control-label">Placa: </label>
                        <input type="text" value="@Model.cod_ingreso.Placa" readonly class="form-control col-lg-3" id="placa" />
                    </div>
                    <div class="form-group">
                        <label for="fecha" class="col-lg-2 control-label">Fecha: </label>
                        <input type="date" value="@Model.cod_ingreso.FechaIngreso.ToString("yyyy-MM-dd")" readonly class="form-control col-lg-3" id="fecha" />
                    </div>
                    <div class="form-group">
                        <label for="tarifa" class="col-lg-2 control-label">Tarifa: </label>
                        <input type="number" value="@Model.cod_ingreso.Tarifa.MontoTarifa" readonly class="form-control col-lg-3" id="tarifa" />
                    </div>


                    <div class="form-group">
                        <label for="monto" class="col-lg-2 control-label">Monto: </label>
                        <input type="number" value="@Model.Monto"  readonly class="form-control col-lg-3" id="monto" />
                    </div>
                    <div class="form-group">
                        <label for="time" class="col-lg-2 control-label">Tiempo: </label>
                        <input type="time" value="@ViewBag.Time" readonly class="form-control col-lg-3" id="time" />
                    </div>

                    <div class="col-lg-3 col-lg-offset-2 ">
                        <button type="button" id="cobrar" class="btn-success btn-block  btn-lg"> Cobrar </button>


                    </div>
                    <div class="col-lg-4 ">
                        <span id="Msg" class=" label label-success" style="display:none">  </span>


                    </div>



                </form>
            </div>
            <div class="row">

                <div class="col-lg-2">
                    <a href="#" id="back"> Lista de Comprobantes </a>

                </div>

            </div>


        </div>




    </section>

</body>


</html>

<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<script>
    $(document).ready(function () {

        var dataType = 'application/json; charset=utf-8';

        var ingreso = {


            CodIngreso: @Model.cod_ingreso.CodIngreso}


        var obj = {
            cod_ingreso: ingreso,
            FechaFinal: "@Model.FechaFinal",
            Monto: @Model.Monto};

        var data = JSON.stringify(obj);

        $("#cobrar").click(function () {
            
            $.ajax({
                type: "Post",
                url: "/Comprobante/Create",
                data: "{nuevo_comprobante:"+data+"}",
                dataType: 'json',
                contentType: dataType,
                success: function (result) {
                    $("#Msg").text("*Se genero correctamente");
                    $("#Msg").toggle();
                    


                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert("Status: " + textStatus); alert("Error: " + errorThrown);
                }    
                



            })



        });







    });



</script>
